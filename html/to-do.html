<!DOCTYPE html>
<html lang="mul">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyRoutine</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            padding-bottom: 60px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #e83e8c;
            color: white;
            padding: 10px;
            text-align: center;
        }
        .date {
            text-align: center;
            padding: 10px;
            cursor: pointer;
        }
        .calendar {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .day {
            background-color: #e0e0e0;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            line-height: 20px;
            text-align: center;
            cursor: pointer;
        }
        .day.active {
            background-color: #e83e8c;
            color: white;
        }
        .pinned {
            padding: 10px;
            margin: 10px;
            display: block;
        }
        .pinned-item {
            background-color: #f7d9e8;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .tabs {
            display: flex;
            justify-content: space-around;
            padding: 10px;
        }
        .tab {
            background-color: #e0e0e0;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
        }
        .tab.active {
            background-color: #e83e8c;
            color: white;
        }
        .routines, .todos, .priority, .bucketlist {
            margin: 10px;
        }
        .routines {
            max-height: 300px;
            overflow-y: auto;
        }
        .todos {
            max-height: 300px;
            overflow-y: auto;
        }
        .priority {
            max-height: 500px;
            overflow-y: auto;
        }
        .bucketlist {
            max-height: 500px;
            overflow-y: auto;
        }
        .routine {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .routine.red {
            background-color: rgba(255, 160, 180, 0.4);
        }
        .routine.orange {
            background-color: rgba(255, 180, 100, 0.4);
        }
        .routine.yellow {
            background-color: rgba(255, 230, 100, 0.4);
        }
        .routine.green {
            background-color: rgba(150, 255, 150, 0.4);
        }
        .routine.blue {
            background-color: rgba(100, 200, 255, 0.4);
        }
        .routine.indigo {
            background-color: rgba(150, 150, 255, 0.4);
        }
        .routine.violet {
            background-color: rgba(200, 150, 255, 0.4);
        }
        .routine button {
            background: #e83e8c;
            color: white;
            border: none;
            padding: 5px;
            cursor: pointer;
            margin-left: 5px;
        }
        .routine button.delete {
            background: red;
        }
        .routine button.next {
            background: #28a745;
        }
        .routine button:hover {
            opacity: 0.8;
        }
        #routinesSection .add-form {
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            position: sticky;
            bottom: 0;
            background-color: #f5f5f5;
            z-index: 1;
        }
        .add-form input {
            padding: 10px;
        }
        .add-form button {
            background-color: #e83e8c;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
        }
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: white;
            display: flex;
            justify-content: space-around;
            padding: 10px;
            border-top: 1px solid #e0e0e0;
        }
        button {
            padding: 8px 15px;
            background-color: #e83e8c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #c2255c;
        }
        .edit-button, .delete-button, .up-button, .down-button {
            margin-right: 5px;
        }
        .delete-button {
            background-color: red;
        }
        .next-button {
            margin-right: 5px;
            background-color: #28a745;
        }
        .next-button:hover {
            background-color: #218838;
        }
        .todos-add-form {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 10px;
        }
        .todos-add-form input {
            flex: 1;
            min-width: 100px;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        .hidden {
            display: none;
        }
        .pinned-item button {
            background: #e83e8c;
            color: white;
            border: none;
            padding: 5px;
            cursor: pointer;
            margin-left: 5px;
        }
        .pinned-item button.delete {
            background: red;
        }
        .pinned-item button.next {
            background: #28a745;
        }
        .pinned-item button:hover {
            opacity: 0.8;
        }
        .calendar-picker {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border: 1px solid #e0e0e0;
            padding: 10px;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .calendar-header button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #e83e8c;
        }
        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 30px);
            gap: 5px;
            justify-content: center;
        }
        .day-cell {
            text-align: center;
            padding: 5px;
            cursor: pointer;
        }
        .day-cell:hover {
            background: #f0f0f0;
        }
        .day-cell.current {
            background: #e83e8c;
            color: white;
            border-radius: 50%;
        }
        .weekday {
            text-align: center;
            font-weight: bold;
        }
        #reflectionsSection {
            margin: 10px;
            max-height: 500px;
            overflow-y: auto;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            width: 100%;
            box-sizing: border-box;
            padding: 0;
            background: none;
            border-radius: 0;
        }
        .section {
            flex: 1;
            min-width: 300px;
            padding: 5px;
            border-radius: 8px;
            box-sizing: border-box;
            background-color: #f7d9e8;
            margin-bottom: 0;
        }
        .section h3 {
            margin: 0 0 5px 0;
            font-size: 1.1em;
            color: #555;
        }
        .section textarea {
            width: 100%;
            height: 120px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            resize: vertical;
            font-size: 0.9em;
            color: #666;
            box-sizing: border-box;
        }
        .section textarea::placeholder {
            color: #999;
        }
        .section textarea:focus {
            outline: 4px solid #c2255c;
        }
        .section .next-button {
            margin-top: 10px;
        }
        #prioritySection {
            margin: 10px;
            max-height: 500px;
            overflow-y: auto;
        }
        .priority-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            width: 100%;
            box-sizing: border-box;
        }
        .priority-container:first-child {
            margin-bottom: 15px;
        }
        .quadrant {
            flex: 1;
            min-width: 300px;
            padding: 5px;
            border-radius: 8px;
            box-sizing: border-box;
            background-color: #f7d9e8;
        }
        .quadrant h2 {
            margin: 0 0 5px 0;
            font-size: 1.1em;
            color: #555;
        }
        .tasks {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .tasks li {
            margin-bottom: 5px;
        }
        .priority textarea {
            width: 100%;
            height: 120px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            resize: vertical;
            font-size: 0.9em;
            color: #666;
            box-sizing: border-box;
        }
        .priority textarea::placeholder {
            color: #999;
        }
        .priority textarea:focus {
            outline: 4px solid #c2255c;
        }
        .quadrant .next-button {
            margin-top: 10px;
        }
        #bucketlistSection {
            margin: 10px;
            max-height: 500px;
            overflow-y: auto;
        }
        .bucketlist-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            width: 100%;
            box-sizing: border-box;
        }
        .bucketlist-item {
            flex: 1;
            min-width: 300px;
            padding: 10px;
            border-radius: 8px;
            background-color: #f7d9e8;
            box-sizing: border-box;
        }
        .bucketlist-item h2 {
            margin: 0 0 5px 0;
            font-size: 1.1em;
            color: #555;
        }
        .bucketlist-item input,
        .bucketlist-item textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 0.9em;
            color: #666;
            box-sizing: border-box;
        }
        .bucketlist-item input {
            height: 40px;
        }
        .bucketlist-item textarea {
            height: 120px;
            resize: vertical;
        }
        .bucketlist-item input::placeholder,
        .bucketlist-item textarea::placeholder {
            color: #999;
        }
        .bucketlist-item input:focus,
        .bucketlist-item textarea:focus {
            outline: 4px solid #c2255c;
        }
        .bucketlist-item .next-button {
            margin-top: 10px;
        }
        .todo-item {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: #f7d9e8;
        }
        .todo-item.new {
            background: linear-gradient(90deg, rgba(255, 160, 180, 0.4), rgba(255, 180, 100, 0.4), rgba(255, 230, 100, 0.4), rgba(150, 255, 150, 0.4), rgba(100, 200, 255, 0.4), rgba(150, 150, 255, 0.4), rgba(200, 150, 255, 0.4));
        }
        .todo-item.completed {
            background-color: #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="header">MyRoutine</div>
    <div class="date" id="currentDate" onclick="toggleCalendarPicker()">Jul 2025 ▼</div>
    <div id="calendarPicker" class="calendar-picker hidden"></div>
    <div class="calendar" id="calendar"></div>
    <div class="pinned">
        <div id="pinnedList"></div>
        <div class="add-form">
            <input id="newPinnedEmoji" placeholder="Emoji (e.g., 💕)">
            <input id="newPinnedText" placeholder="Text">
            <button onclick="addPinned()">Add Pinned</button>
        </div>
    </div>
    <div class="tabs">
        <div class="tab" onclick="switchTab('bucketlist')">Bucket List</div>
        <div class="tab" onclick="switchTab('priority')">Priority</div>
        <div class="tab active" onclick="switchTab('routines')">Routines</div>
        <div class="tab" onclick="switchTab('todos')">To-dos</div>
        <div class="tab" onclick="switchTab('reflections')">Reflections</div>
    </div>
    <div id="prioritySection" class="priority hidden">
        <div class="priority-container">
            <div class="quadrant">
                <h2>1. Urgent & Important</h2>
                <ul class="tasks">
                    <li><textarea id="task1" placeholder="Handle immediately"></textarea></li>
                    <li><button class="next-button" onclick="copyTask1ToNextDay()">Next</button></li>
                </ul>
            </div>
            <div class="quadrant">
                <h2>2. Important & Not Urgent</h2>
                <ul class="tasks">
                    <li><textarea id="task2" placeholder="Set a deadline and complete as soon as possible"></textarea></li>
                    <li><button class="next-button" onclick="copyTask2ToNextDay()">Next</button></li>
                </ul>
            </div>
        </div>
        <div class="priority-container">
            <div class="quadrant">
                <h2>3. Urgent & Not Important</h2>
                <ul class="tasks">
                    <li><textarea id="task3" placeholder="Reduce or delegate"></textarea></li>
                    <li><button class="next-button" onclick="copyTask3ToNextDay()">Next</button></li>
                </ul>
            </div>
            <div class="quadrant">
                <h2>4. Not Urgent & Not Important</h2>
                <ul class="tasks">
                    <li><textarea id="task4" placeholder="Cancel or postpone"></textarea></li>
                    <li><button class="next-button" onclick="copyTask4ToNextDay()">Next</button></li>
                </ul>
            </div>
        </div>
    </div>
    <div id="routinesSection">
        <div class="routines" id="routinesList"></div>
        <div class="add-form">
            <input id="newTime" placeholder="Time (e.g., 4 PM)">
            <input id="newEmoji" placeholder="Emoji (e.g., 💕)">
            <input id="newText" placeholder="Text">
            <button onclick="addRoutine()">Add Routine</button>
            <button class="next-button" onclick="copyAllRoutinesToNextDay()">Copy All to Next Day</button>
        </div>
    </div>
    <div id="todosSection" class="hidden">
        <div class="todos">
            <div id="todosBody"></div>
        </div>
        <div class="todos-add-form">
            <input id="newImportance" placeholder="Importance">
            <input id="newPriority" placeholder="Priority">
            <input id="newTask" placeholder="Task">
            <input id="newEstimatedTime" placeholder="Estimated Time">
            <input id="newStartTime" placeholder="Start Time">
            <input id="newDeadline" placeholder="Deadline">
            <button onclick="addTodo()">Add</button>
        </div>
    </div>
    <div id="reflectionsSection" class="hidden">
        <div class="container">
            <div class="section">
                <h3>Words to self</h3>
                <textarea id="wordsToSelf" placeholder="Anything you want to tell yourself?"></textarea>
                <button class="next-button" onclick="copyWordsToSelfToNextDay()">Next</button>
            </div>
            <div class="section">
                <h3>Best possible scenario</h3>
                <textarea id="reflection" placeholder="No pressure. Start with one sentence."></textarea>
                <button class="next-button" onclick="copyReflectionToNextDay()">Next</button>
            </div>
            <div class="section">
                <h3>Today's goals (important, urgent)</h3>
                <textarea id="gratitude" placeholder="No pressure. Start with one sentence."></textarea>
                <button class="next-button" onclick="copyGratitudeToNextDay()">Next</button>
            </div>
            <div class="section">
                <h3>Things to improve</h3>
                <textarea id="challenges" placeholder="No pressure. Start with one sentence."></textarea>
                <button class="next-button" onclick="copyChallengesToNextDay()">Next</button>
            </div>
            <div class="section">
                <h3>Today's achieved goals (important, urgent)</h3>
                <textarea id="plans" placeholder="No pressure. Start with one sentence."></textarea>
                <button class="next-button" onclick="copyPlansToNextDay()">Next</button>
            </div>
            <div class="section">
                <h3>Praise and gratitude to myself</h3>
                <textarea id="motivation" placeholder="No pressure. Start with one sentence."></textarea>
                <button class="next-button" onclick="copyMotivationToNextDay()">Next</button>
            </div>
            <div class="section">
                <h3>Problems, obstacles, reasons for failure, reflection</h3>
                <textarea id="reflection2" placeholder="No pressure. Start with one sentence."></textarea>
                <button class="next-button" onclick="copyReflection2ToNextDay()">Next</button>
            </div>
            <div class="section">
                <h3>By when, how, solutions, lessons learned</h3>
                <textarea id="reflection3" placeholder="No pressure. Start with one sentence."></textarea>
                <button class="next-button" onclick="copyReflection3ToNextDay()">Next</button>
            </div>
            <div class="section">
                <h3>Tomorrow's goals (important, urgent)</h3>
                <textarea id="reflection4" placeholder="No pressure. Start with one sentence."></textarea>
                <button class="next-button" onclick="copyReflection4ToNextDay()">Next</button>
            </div>
        </div>
    </div>
    <div id="bucketlistSection" class="bucketlist hidden">
        <div class="bucketlist-container">
            <div class="bucketlist-item">
                <h2>Bucket List Item 1</h2>
                <input type="text" id="title_bucket1" placeholder="Title">
                <input type="text" id="deadline_bucket1" placeholder="Deadline">
                <textarea id="description_bucket1" placeholder="Description"></textarea>
                <button class="next-button" onclick="copyBucket1ToNextDay()">Next</button>
            </div>
            <div class="bucketlist-item">
                <h2>Bucket List Item 2</h2>
                <input type="text" id="title_bucket2" placeholder="Title">
                <input type="text" id="deadline_bucket2" placeholder="Deadline">
                <textarea id="description_bucket2" placeholder="Description"></textarea>
                <button class="next-button" onclick="copyBucket2ToNextDay()">Next</button>
            </div>
            <div class="bucketlist-item">
                <h2>Bucket List Item 3</h2>
                <input type="text" id="title_bucket3" placeholder="Title">
                <input type="text" id="deadline_bucket3" placeholder="Deadline">
                <textarea id="description_bucket3" placeholder="Description"></textarea>
                <button class="next-button" onclick="copyBucket3ToNextDay()">Next</button>
            </div>
        </div>
    </div>
    <div class="bottom-nav">
        <button>Home</button>
        <button>Statistics</button>
        <button>Discover</button>
        <button>Social</button>
        <button>MY</button>
    </div>
    <script>
        let currentDate = new Date();
        let pickerDate;
        const dateKey = () => currentDate.toISOString().split('T')[0];
        function getNextDateKey() {
            const nextDate = new Date(currentDate);
            nextDate.setDate(currentDate.getDate() + 1);
            return nextDate.toISOString().split('T')[0];
        }
        function updateDateDisplay() {
            const month = currentDate.toLocaleString('default', { month: 'short' });
            document.getElementById('currentDate').textContent = `${month} ${currentDate.getFullYear()} ▼`;
        }
        function renderCalendar() {
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            const start = new Date(currentDate);
            start.setDate(start.getDate() - start.getDay());
            for (let i = 0; i < 7; i++) {
                const day = new Date(start);
                day.setDate(day.getDate() + i);
                const div = document.createElement('div');
                div.className = 'day' + (day.toDateString() === currentDate.toDateString() ? ' active' : '');
                const span = document.createElement('span');
                span.innerHTML = `${day.toLocaleString('default', { weekday: 'short' })}<br>${day.getDate()}`;
                span.style.display = 'block';
                span.style.height = '100%';
                span.style.lineHeight = '20px';
                span.onclick = () => {
                    currentDate = day;
                    updateDateDisplay();
                    renderCalendar();
                    loadItems();
                };
                div.appendChild(span);
                calendar.appendChild(div);
            }
        }
        function toggleCalendarPicker() {
            const picker = document.getElementById('calendarPicker');
            if (picker.classList.contains('hidden')) {
                pickerDate = new Date(currentDate);
                renderMonthCalendar();
                picker.classList.remove('hidden');
            } else {
                picker.classList.add('hidden');
            }
        }
        function renderMonthCalendar() {
            const picker = document.getElementById('calendarPicker');
            picker.innerHTML = '';
            const header = document.createElement('div');
            header.className = 'calendar-header';
            const prevYear = document.createElement('button');
            prevYear.textContent = '<<';
            prevYear.onclick = () => changeYear(-1);
            const prevMonth = document.createElement('button');
            prevMonth.textContent = '<';
            prevMonth.onclick = () => changeMonth(-1);
            const monthTitle = document.createElement('span');
            monthTitle.textContent = pickerDate.toLocaleString('default', { month: 'long', year: 'numeric' });
            const nextMonth = document.createElement('button');
            nextMonth.textContent = '>';
            nextMonth.onclick = () => changeMonth(1);
            const nextYear = document.createElement('button');
            nextYear.textContent = '>>';
            nextYear.onclick = () => changeYear(1);
            header.appendChild(prevYear);
            header.appendChild(prevMonth);
            header.appendChild(monthTitle);
            header.appendChild(nextMonth);
            header.appendChild(nextYear);
            picker.appendChild(header);
            const weekdays = document.createElement('div');
            weekdays.className = 'days-grid';
            ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(day => {
                const d = document.createElement('div');
                d.className = 'weekday';
                d.textContent = day;
                weekdays.appendChild(d);
            });
            picker.appendChild(weekdays);
            const daysGrid = document.createElement('div');
            daysGrid.className = 'days-grid';
            const firstDay = new Date(pickerDate.getFullYear(), pickerDate.getMonth(), 1);
            const lastDay = new Date(pickerDate.getFullYear(), pickerDate.getMonth() + 1, 0);
            const startDay = firstDay.getDay();
            for (let i = 0; i < startDay; i++) {
                const empty = document.createElement('div');
                daysGrid.appendChild(empty);
            }
            for (let d = 1; d <= lastDay.getDate(); d++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell';
                dayCell.textContent = d;
                if (d === currentDate.getDate() && pickerDate.getMonth() === currentDate.getMonth() && pickerDate.getFullYear() === currentDate.getFullYear()) {
                    dayCell.classList.add('current');
                }
                dayCell.onclick = () => {
                    currentDate = new Date(pickerDate.getFullYear(), pickerDate.getMonth(), d);
                    updateDateDisplay();
                    renderCalendar();
                    loadItems();
                    toggleCalendarPicker();
                };
                daysGrid.appendChild(dayCell);
            }
            picker.appendChild(daysGrid);
        }
        function changeMonth(delta) {
            pickerDate.setMonth(pickerDate.getMonth() + delta);
            renderMonthCalendar();
        }
        function changeYear(delta) {
            pickerDate.setFullYear(pickerDate.getFullYear() + delta);
            renderMonthCalendar();
        }
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab[onclick="switchTab('${tab}')"]`).classList.add('active');
            document.getElementById('prioritySection').classList.toggle('hidden', tab !== 'priority');
            document.getElementById('routinesSection').classList.toggle('hidden', tab !== 'routines');
            document.getElementById('todosSection').classList.toggle('hidden', tab !== 'todos');
            document.getElementById('reflectionsSection').classList.toggle('hidden', tab !== 'reflections');
            document.getElementById('bucketlistSection').classList.toggle('hidden', tab !== 'bucketlist');
        }
        function loadItems() {
            loadPinned();
            loadRoutines();
            loadTodos();
            loadReflections();
            loadPriority();
            loadBucketList();
        }
        function loadPinned() {
            const pinned = JSON.parse(localStorage.getItem('pinned') || '{}');
            const currentPinned = pinned[dateKey()] || [];
            const list = document.getElementById('pinnedList');
            list.innerHTML = '';
            currentPinned.forEach((pin, index) => {
                const div = document.createElement('div');
                div.className = 'pinned-item';
                div.innerHTML = `
                    <span class="pinned-emoji">${pin.emoji}</span> <span class="pinned-text">${pin.text}</span>
                    <button onclick="editPinned(${index})">Edit</button>
                    <button class="delete" onclick="deletePinned(${index})">Delete</button>
                    <button onclick="movePinned(${index}, 'up')">Up</button>
                    <button onclick="movePinned(${index}, 'down')">Down</button>
                    <button class="next" onclick="copyPinnedToNextDay(${index})">Next</button>
                `;
                list.appendChild(div);
            });
        }
        function addPinned() {
            const emoji = document.getElementById('newPinnedEmoji').value;
            const text = document.getElementById('newPinnedText').value;
            if (!text) return;
            const pinned = JSON.parse(localStorage.getItem('pinned') || '{}');
            const currentPinned = pinned[dateKey()] || [];
            currentPinned.push({ emoji, text });
            pinned[dateKey()] = currentPinned;
            localStorage.setItem('pinned', JSON.stringify(pinned));
            document.getElementById('newPinnedEmoji').value = '';
            document.getElementById('newPinnedText').value = '';
            loadPinned();
        }
        function editPinned(index) {
            const pinned = JSON.parse(localStorage.getItem('pinned') || '{}');
            const currentPinned = pinned[dateKey()] || [];
            const pin = currentPinned[index];
            const newEmoji = prompt("Edit Emoji:", pin.emoji || '');
            if (newEmoji !== null) pin.emoji = newEmoji;
            const newText = prompt("Edit Text:", pin.text || '');
            if (newText !== null) pin.text = newText;
            pinned[dateKey()] = currentPinned;
            localStorage.setItem('pinned', JSON.stringify(pinned));
            loadPinned();
        }
        function deletePinned(index) {
            const pinned = JSON.parse(localStorage.getItem('pinned') || '{}');
            const currentPinned = pinned[dateKey()] || [];
            currentPinned.splice(index, 1);
            pinned[dateKey()] = currentPinned;
            localStorage.setItem('pinned', JSON.stringify(pinned));
            loadPinned();
        }
        function movePinned(index, direction) {
            const pinned = JSON.parse(localStorage.getItem('pinned') || '{}');
            const currentPinned = pinned[dateKey()] || [];
            if (direction === 'up' && index > 0) {
                [currentPinned[index - 1], currentPinned[index]] = [currentPinned[index], currentPinned[index - 1]];
            } else if (direction === 'down' && index < currentPinned.length - 1) {
                [currentPinned[index], currentPinned[index + 1]] = [currentPinned[index + 1], currentPinned[index]];
            }
            pinned[dateKey()] = currentPinned;
            localStorage.setItem('pinned', JSON.stringify(pinned));
            loadPinned();
        }
        function copyPinnedToNextDay(index) {
            const pinned = JSON.parse(localStorage.getItem('pinned') || '{}');
            const currentPinned = pinned[dateKey()] || [];
            const nextDateKey = getNextDateKey();
            const nextPinned = pinned[nextDateKey] || [];
            const pin = currentPinned[index];
            nextPinned.push({ emoji: pin.emoji, text: pin.text });
            pinned[nextDateKey] = nextPinned;
            localStorage.setItem('pinned', JSON.stringify(pinned));
            alert(`Pinned item "${pin.text}" copied to ${nextDateKey}`);
        }
        function loadRoutines() {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            const list = document.getElementById('routinesList');
            list.innerHTML = '';
            const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'violet'];
            currentRoutines.forEach((routine, index) => {
                const colorClass = colors[index % colors.length];
                const div = document.createElement('div');
                div.className = `routine ${colorClass}`;
                div.innerHTML = `
                    <input type="checkbox" ${routine.checked ? 'checked' : ''} onchange="toggleRoutineCheck(${index})">
                    <span class="routine-time">${routine.time}</span> <span class="routine-emoji">${routine.emoji}</span> <span class="routine-text">${routine.text}</span>
                    <button onclick="editRoutine(${index})">Edit</button>
                    <button class="delete" onclick="deleteRoutine(${index})">Delete</button>
                    <button onclick="moveRoutine(${index}, 'up')">Up</button>
                    <button onclick="moveRoutine(${index}, 'down')">Down</button>
                    <button class="next" onclick="copyRoutineToNextDay(${index})">Next</button>
                `;
                list.appendChild(div);
            });
        }
        function addRoutine() {
            const time = document.getElementById('newTime').value;
            const emoji = document.getElementById('newEmoji').value;
            const text = document.getElementById('newText').value;
            if (!time || !text) return;
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            currentRoutines.push({ time, emoji, text, checked: false });
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            document.getElementById('newTime').value = '';
            document.getElementById('newEmoji').value = '';
            document.getElementById('newText').value = '';
            const routinesList = document.getElementById('routinesList');
            const scrollPosition = routinesList.scrollTop;
            loadRoutines();
            routinesList.scrollTop = scrollPosition;
        }
        function toggleRoutineCheck(index) {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            currentRoutines[index].checked = !currentRoutines[index].checked;
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            const routinesList = document.getElementById('routinesList');
            const scrollPosition = routinesList.scrollTop;
            loadRoutines();
            routinesList.scrollTop = scrollPosition;
        }
        function editRoutine(index) {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            const routine = currentRoutines[index];
            const newTime = prompt("Edit Time:", routine.time || '');
            if (newTime !== null) routine.time = newTime;
            const newEmoji = prompt("Edit Emoji:", routine.emoji || '');
            if (newEmoji !== null) routine.emoji = newEmoji;
            const newText = prompt("Edit Text:", routine.text || '');
            if (newText !== null) routine.text = newText;
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            const routinesList = document.getElementById('routinesList');
            const scrollPosition = routinesList.scrollTop;
            loadRoutines();
            routinesList.scrollTop = scrollPosition;
        }
        function deleteRoutine(index) {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            currentRoutines.splice(index, 1);
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            const routinesList = document.getElementById('routinesList');
            const scrollPosition = routinesList.scrollTop;
            loadRoutines();
            routinesList.scrollTop = scrollPosition;
        }
        function moveRoutine(index, direction) {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            if (direction === 'up' && index > 0) {
                [currentRoutines[index - 1], currentRoutines[index]] = [currentRoutines[index], currentRoutines[index - 1]];
            } else if (direction === 'down' && index < currentRoutines.length - 1) {
                [currentRoutines[index], currentRoutines[index + 1]] = [currentRoutines[index + 1], currentRoutines[index]];
            }
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            const routinesList = document.getElementById('routinesList');
            const scrollPosition = routinesList.scrollTop;
            loadRoutines();
            routinesList.scrollTop = scrollPosition;
        }
        function copyRoutineToNextDay(index) {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            const nextDateKey = getNextDateKey();
            const nextRoutines = routines[nextDateKey] || [];
            const routine = currentRoutines[index];
            nextRoutines.push({ time: routine.time, emoji: routine.emoji, text: routine.text, checked: false });
            routines[nextDateKey] = nextRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            alert(`Routine "${routine.text}" copied to ${nextDateKey}`);
        }
        function copyAllRoutinesToNextDay() {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            const nextDateKey = getNextDateKey();
            const nextRoutines = routines[nextDateKey] || [];
            currentRoutines.forEach(routine => {
                nextRoutines.push({ time: routine.time, emoji: routine.emoji, text: routine.text, checked: false });
            });
            routines[nextDateKey] = nextRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            alert(`All routines copied to ${nextDateKey}`);
        }
        function loadTodos() {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            const todosBody = document.getElementById('todosBody');
            todosBody.innerHTML = '';
            currentTodos.forEach((todo, index) => {
                const div = document.createElement('div');
                div.className = `todo-item ${todo.isNew ? 'new' : ''} ${todo.checked ? 'completed' : ''}`;
                div.innerHTML = `
                    <input type="checkbox" ${todo.checked ? 'checked' : ''} onchange="toggleTodoCheck(${index})">
                    <span class="todo-importance">${todo.importance || ''}</span> -
                    <span class="todo-priority">${todo.priority || ''}</span> -
                    <span class="todo-task">${todo.task || ''}</span> -
                    <span class="todo-estimatedTime">${todo.estimatedTime || ''}</span> -
                    <span class="todo-startTime">${todo.startTime || ''}</span> -
                    <span class="todo-deadline">${todo.deadline || ''}</span>
                    <button class="edit-button" onclick="editTodo(${index})">Edit</button>
                    <button class="delete-button" onclick="deleteTodo(${index})">Delete</button>
                    <button class="up-button" onclick="moveTodo(${index}, 'up')">Up</button>
                    <button class="down-button" onclick="moveTodo(${index}, 'down')">Down</button>
                    <button class="next-button" onclick="copyTodoToNextDay(${index})">Next</button>
                `;
                todosBody.appendChild(div);
            });
        }
        function addTodo() {
            const importance = document.getElementById('newImportance').value;
            const priority = document.getElementById('newPriority').value;
            const task = document.getElementById('newTask').value;
            const estimatedTime = document.getElementById('newEstimatedTime').value;
            const startTime = document.getElementById('newStartTime').value;
            const deadline = document.getElementById('newDeadline').value;
            if (!task) {
                alert("Please enter a task!");
                return;
            }
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            currentTodos.push({ importance, priority, task, estimatedTime, startTime, deadline, checked: false, isNew: true });
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            document.getElementById('newImportance').value = '';
            document.getElementById('newPriority').value = '';
            document.getElementById('newTask').value = '';
            document.getElementById('newEstimatedTime').value = '';
            document.getElementById('newStartTime').value = '';
            document.getElementById('newDeadline').value = '';
            loadTodos();
        }
        function toggleTodoCheck(index) {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            currentTodos[index].checked = !currentTodos[index].checked;
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            loadTodos();
        }
        function deleteTodo(index) {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            currentTodos.splice(index, 1);
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            loadTodos();
        }
        function editTodo(index) {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            const todo = currentTodos[index];
            const newImportance = prompt("Edit Importance:", todo.importance || '');
            if (newImportance !== null) todo.importance = newImportance;
            const newPriority = prompt("Edit Priority:", todo.priority || '');
            if (newPriority !== null) todo.priority = newPriority;
            const newTask = prompt("Edit Task:", todo.task || '');
            if (newTask !== null) todo.task = newTask;
            const newEstimatedTime = prompt("Edit Estimated Time:", todo.estimatedTime || '');
            if (newEstimatedTime !== null) todo.estimatedTime = newEstimatedTime;
            const newStartTime = prompt("Edit Start Time:", todo.startTime || '');
            if (newStartTime !== null) todo.startTime = newStartTime;
            const newDeadline = prompt("Edit Deadline:", todo.deadline || '');
            if (newDeadline !== null) todo.deadline = newDeadline;
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            loadTodos();
        }
        function moveTodo(index, direction) {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            if (direction === 'up' && index > 0) {
                [currentTodos[index - 1], currentTodos[index]] = [currentTodos[index], currentTodos[index - 1]];
            } else if (direction === 'down' && index < currentTodos.length - 1) {
                [currentTodos[index], currentTodos[index + 1]] = [currentTodos[index + 1], currentTodos[index]];
            }
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            loadTodos();
        }
        function copyTodoToNextDay(index) {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            const nextDateKey = getNextDateKey();
            const nextTodos = todos[nextDateKey] || [];
            const todo = currentTodos[index];
            nextTodos.push({
                importance: todo.importance,
                priority: todo.priority,
                task: todo.task,
                estimatedTime: todo.estimatedTime,
                startTime: todo.startTime,
                deadline: todo.deadline,
                checked: false,
                isNew: true
            });
            todos[nextDateKey] = nextTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            alert(`Todo "${todo.task}" copied to ${nextDateKey}`);
        }
        function saveReflections() {
            const data = {
                wordsToSelf: document.getElementById('wordsToSelf').value,
                reflection: document.getElementById('reflection').value,
                gratitude: document.getElementById('gratitude').value,
                challenges: document.getElementById('challenges').value,
                plans: document.getElementById('plans').value,
                motivation: document.getElementById('motivation').value,
                reflection2: document.getElementById('reflection2').value,
                reflection3: document.getElementById('reflection3').value,
                reflection4: document.getElementById('reflection4').value
            };
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            reflections[dateKey()] = data;
            localStorage.setItem('reflections', JSON.stringify(reflections));
        }
        function loadReflections() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const data = reflections[dateKey()] || {};
            document.getElementById('wordsToSelf').value = data.wordsToSelf || '';
            document.getElementById('reflection').value = data.reflection || '';
            document.getElementById('gratitude').value = data.gratitude || '';
            document.getElementById('challenges').value = data.challenges || '';
            document.getElementById('plans').value = data.plans || '';
            document.getElementById('motivation').value = data.motivation || '';
            document.getElementById('reflection2').value = data.reflection2 || '';
            document.getElementById('reflection3').value = data.reflection3 || '';
            document.getElementById('reflection4').value = data.reflection4 || '';
        }
        function copyWordsToSelfToNextDay() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const currentData = reflections[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = reflections[nextDateKey] || {};
            nextData.wordsToSelf = document.getElementById('wordsToSelf').value;
            reflections[nextDateKey] = nextData;
            localStorage.setItem('reflections', JSON.stringify(reflections));
            alert(`Words to Self copied to ${nextDateKey}`);
        }
        function copyReflectionToNextDay() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const currentData = reflections[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = reflections[nextDateKey] || {};
            nextData.reflection = document.getElementById('reflection').value;
            reflections[nextDateKey] = nextData;
            localStorage.setItem('reflections', JSON.stringify(reflections));
            alert(`Best Possible Scenario copied to ${nextDateKey}`);
        }
        function copyGratitudeToNextDay() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const currentData = reflections[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = reflections[nextDateKey] || {};
            nextData.gratitude = document.getElementById('gratitude').value;
            reflections[nextDateKey] = nextData;
            localStorage.setItem('reflections', JSON.stringify(reflections));
            alert(`Today's Goals copied to ${nextDateKey}`);
        }
        function copyChallengesToNextDay() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const currentData = reflections[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = reflections[nextDateKey] || {};
            nextData.challenges = document.getElementById('challenges').value;
            reflections[nextDateKey] = nextData;
            localStorage.setItem('reflections', JSON.stringify(reflections));
            alert(`Things to Improve copied to ${nextDateKey}`);
        }
        function copyPlansToNextDay() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const currentData = reflections[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = reflections[nextDateKey] || {};
            nextData.plans = document.getElementById('plans').value;
            reflections[nextDateKey] = nextData;
            localStorage.setItem('reflections', JSON.stringify(reflections));
            alert(`Today's Achieved Goals copied to ${nextDateKey}`);
        }
        function copyMotivationToNextDay() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const currentData = reflections[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = reflections[nextDateKey] || {};
            nextData.motivation = document.getElementById('motivation').value;
            reflections[nextDateKey] = nextData;
            localStorage.setItem('reflections', JSON.stringify(reflections));
            alert(`Praise and Gratitude to Myself copied to ${nextDateKey}`);
        }
        function copyReflection2ToNextDay() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const currentData = reflections[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = reflections[nextDateKey] || {};
            nextData.reflection2 = document.getElementById('reflection2').value;
            reflections[nextDateKey] = nextData;
            localStorage.setItem('reflections', JSON.stringify(reflections));
            alert(`Problems, Obstacles, Reasons for Failure copied to ${nextDateKey}`);
        }
        function copyReflection3ToNextDay() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const currentData = reflections[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = reflections[nextDateKey] || {};
            nextData.reflection3 = document.getElementById('reflection3').value;
            reflections[nextDateKey] = nextData;
            localStorage.setItem('reflections', JSON.stringify(reflections));
            alert(`By When, How, Solutions, Lessons Learned copied to ${nextDateKey}`);
        }
        function copyReflection4ToNextDay() {
            const reflections = JSON.parse(localStorage.getItem('reflections') || '{}');
            const currentData = reflections[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = reflections[nextDateKey] || {};
            nextData.reflection4 = document.getElementById('reflection4').value;
            reflections[nextDateKey] = nextData;
            localStorage.setItem('reflections', JSON.stringify(reflections));
            alert(`Tomorrow's Goals copied to ${nextDateKey}`);
        }
        function savePriority(taskId) {
            const taskText = document.getElementById(taskId).value;
            const priorityTasks = JSON.parse(localStorage.getItem('priorityTasks') || '{}');
            const currentTasks = priorityTasks[dateKey()] || {};
            currentTasks[taskId] = taskText;
            priorityTasks[dateKey()] = currentTasks;
            localStorage.setItem('priorityTasks', JSON.stringify(priorityTasks));
        }
        function loadPriority() {
            const priorityTasks = JSON.parse(localStorage.getItem('priorityTasks') || '{}');
            const currentTasks = priorityTasks[dateKey()] || {};
            document.getElementById('task1').value = currentTasks.task1 || '';
            document.getElementById('task2').value = currentTasks.task2 || '';
            document.getElementById('task3').value = currentTasks.task3 || '';
            document.getElementById('task4').value = currentTasks.task4 || '';
        }
        function copyTask1ToNextDay() {
            const priorityTasks = JSON.parse(localStorage.getItem('priorityTasks') || '{}');
            const currentTasks = priorityTasks[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextTasks = priorityTasks[nextDateKey] || {};
            nextTasks.task1 = document.getElementById('task1').value;
            priorityTasks[nextDateKey] = nextTasks;
            localStorage.setItem('priorityTasks', JSON.stringify(priorityTasks));
            alert(`Priority 1 copied to ${nextDateKey}`);
        }
        function copyTask2ToNextDay() {
            const priorityTasks = JSON.parse(localStorage.getItem('priorityTasks') || '{}');
            const currentTasks = priorityTasks[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextTasks = priorityTasks[nextDateKey] || {};
            nextTasks.task2 = document.getElementById('task2').value;
            priorityTasks[nextDateKey] = nextTasks;
            localStorage.setItem('priorityTasks', JSON.stringify(priorityTasks));
            alert(`Priority 2 copied to ${nextDateKey}`);
        }
        function copyTask3ToNextDay() {
            const priorityTasks = JSON.parse(localStorage.getItem('priorityTasks') || '{}');
            const currentTasks = priorityTasks[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextTasks = priorityTasks[nextDateKey] || {};
            nextTasks.task3 = document.getElementById('task3').value;
            priorityTasks[nextDateKey] = nextTasks;
            localStorage.setItem('priorityTasks', JSON.stringify(priorityTasks));
            alert(`Priority 3 copied to ${nextDateKey}`);
        }
        function copyTask4ToNextDay() {
            const priorityTasks = JSON.parse(localStorage.getItem('priorityTasks') || '{}');
            const currentTasks = priorityTasks[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextTasks = priorityTasks[nextDateKey] || {};
            nextTasks.task4 = document.getElementById('task4').value;
            priorityTasks[nextDateKey] = nextTasks;
            localStorage.setItem('priorityTasks', JSON.stringify(priorityTasks));
            alert(`Priority 4 copied to ${nextDateKey}`);
        }
        function saveBucketList() {
            const data = {
                title_bucket1: document.getElementById('title_bucket1').value,
                deadline_bucket1: document.getElementById('deadline_bucket1').value,
                description_bucket1: document.getElementById('description_bucket1').value,
                title_bucket2: document.getElementById('title_bucket2').value,
                deadline_bucket2: document.getElementById('deadline_bucket2').value,
                description_bucket2: document.getElementById('description_bucket2').value,
                title_bucket3: document.getElementById('title_bucket3').value,
                deadline_bucket3: document.getElementById('deadline_bucket3').value,
                description_bucket3: document.getElementById('description_bucket3').value
            };
            const bucketlist = JSON.parse(localStorage.getItem('bucketlist') || '{}');
            bucketlist[dateKey()] = data;
            localStorage.setItem('bucketlist', JSON.stringify(bucketlist));
        }
        function loadBucketList() {
            const bucketlist = JSON.parse(localStorage.getItem('bucketlist') || '{}');
            const data = bucketlist[dateKey()] || {};
            document.getElementById('title_bucket1').value = data.title_bucket1 || '';
            document.getElementById('deadline_bucket1').value = data.deadline_bucket1 || '';
            document.getElementById('description_bucket1').value = data.description_bucket1 || '';
            document.getElementById('title_bucket2').value = data.title_bucket2 || '';
            document.getElementById('deadline_bucket2').value = data.deadline_bucket2 || '';
            document.getElementById('description_bucket2').value = data.description_bucket2 || '';
            document.getElementById('title_bucket3').value = data.title_bucket3 || '';
            document.getElementById('deadline_bucket3').value = data.deadline_bucket3 || '';
            document.getElementById('description_bucket3').value = data.description_bucket3 || '';
        }
        function copyBucket1ToNextDay() {
            const bucketlist = JSON.parse(localStorage.getItem('bucketlist') || '{}');
            const currentData = bucketlist[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = bucketlist[nextDateKey] || {};
            nextData.title_bucket1 = document.getElementById('title_bucket1').value;
            nextData.deadline_bucket1 = document.getElementById('deadline_bucket1').value;
            nextData.description_bucket1 = document.getElementById('description_bucket1').value;
            bucketlist[nextDateKey] = nextData;
            localStorage.setItem('bucketlist', JSON.stringify(bucketlist));
            alert(`Bucket List Item 1 copied to ${nextDateKey}`);
        }
        function copyBucket2ToNextDay() {
            const bucketlist = JSON.parse(localStorage.getItem('bucketlist') || '{}');
            const currentData = bucketlist[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = bucketlist[nextDateKey] || {};
            nextData.title_bucket2 = document.getElementById('title_bucket2').value;
            nextData.deadline_bucket2 = document.getElementById('deadline_bucket2').value;
            nextData.description_bucket2 = document.getElementById('description_bucket2').value;
            bucketlist[nextDateKey] = nextData;
            localStorage.setItem('bucketlist', JSON.stringify(bucketlist));
            alert(`Bucket List Item 2 copied to ${nextDateKey}`);
        }
        function copyBucket3ToNextDay() {
            const bucketlist = JSON.parse(localStorage.getItem('bucketlist') || '{}');
            const currentData = bucketlist[dateKey()] || {};
            const nextDateKey = getNextDateKey();
            const nextData = bucketlist[nextDateKey] || {};
            nextData.title_bucket3 = document.getElementById('title_bucket3').value;
            nextData.deadline_bucket3 = document.getElementById('deadline_bucket3').value;
            nextData.description_bucket3 = document.getElementById('description_bucket3').value;
            bucketlist[nextDateKey] = nextData;
            localStorage.setItem('bucketlist', JSON.stringify(bucketlist));
            alert(`Bucket List Item 3 copied to ${nextDateKey}`);
        }
        updateDateDisplay();
        renderCalendar();
        loadItems();
        document.querySelectorAll('#reflectionsSection textarea, #prioritySection textarea, #bucketlistSection input, #bucketlistSection textarea').forEach(input => {
            input.addEventListener('input', () => {
                if (input.closest('#reflectionsSection')) {
                    saveReflections();
                } else if (input.closest('#prioritySection')) {
                    savePriority(input.id);
                } else if (input.closest('#bucketlistSection')) {
                    saveBucketList();
                }
            });
        });
        const pinned = JSON.parse(localStorage.getItem('pinned') || '{}');
        if (!pinned[dateKey()]) {
            pinned[dateKey()] = [
                { emoji: '💕', text: 'Xtal Founder/CEO/CTO/Inventor' },
                { emoji: '💕', text: '전세계 해외여행 다니는 기업가, Xtal, Problem-solver, Builder, Maker, Producer, Risk-taker. 세상을 바꾸는 사람들이 좋아하는 놀랍고 유용한 제품을 만드는 사람. 모두를 위한 지속 가능한 풍요.' },
                { emoji: '💕', text: '2026년 실리콘밸리 팔로알토,글로벌인재유치,해외vc투자받기,뉴욕증시상장,NYSE오프닝벨울리기,NYSE IPO,연쇄창업,포브스기업인,사회환원' },
                { emoji: '💕', text: 'Positive impact on humanity and the world through technology 소비자만족 신뢰, 인공지능테크제조주식회사(소프트웨어&하드웨어)' },
                { emoji: '💕', text: '개발자,연구원,엔지니어,과학자,영재들을 위한 발명천국 만들기,누구나세일즈가될수있는우리회사,성과급높은회사' },
                { emoji: '💕', text: '과학신기술 CTO 디자인헤드 글로벌마켓 테크 스타트업 테크노퀸 최고의기업가 문제해결사 혁신가 실행가 설계자 발명가 도전가 모험가 탐험가 크리스탈머스크' }
            ];
            localStorage.setItem('pinned', JSON.stringify(pinned));
            loadPinned();
        }
        const routines = JSON.parse(localStorage.getItem('routines') || '{}');
        if (!routines[dateKey()]) {
            routines[dateKey()] = [
                { time: '12 AM', emoji: '❤️', text: '개발1', checked: false },
                { time: '1 AM', emoji: '🧡', text: '잠1', checked: false },
                { time: '2 AM', emoji: '💛', text: '잠2', checked: false },
                { time: '3 AM', emoji: '💚', text: '잠3', checked: false },
                { time: '4 AM', emoji: '🩵', text: '잠4', checked: false },
                { time: '5 AM', emoji: '💙', text: '잠5', checked: false },
                { time: '6 AM', emoji: '💜', text: '잠6', checked: false },
                { time: '7 AM', emoji: '🩷', text: '개발2', checked: false },
                { time: '8 AM', emoji: '🤎', text: '개발3', checked: false },
                { time: '9 AM', emoji: '🖤', text: '개발4', checked: false },
                { time: '10 AM', emoji: '🩶', text: '개발5', checked: false },
                { time: '11 AM', emoji: '🤍', text: '개발6', checked: false },
                { time: '12 PM', emoji: '❤️', text: '식사1', checked: false },
                { time: '1 PM', emoji: '🧡', text: '개발7', checked: false },
                { time: '2 PM', emoji: '💛', text: '준비,이동', checked: false },
                { time: '3 PM', emoji: '💚', text: '일1', checked: false },
                { time: '4 PM', emoji: '🩵', text: '일2', checked: false },
                { time: '5 PM', emoji: '💙', text: '일3', checked: false },
                { time: '6 PM', emoji: '💜', text: '일4', checked: false },
                { time: '7 PM', emoji: '🩷', text: '일5', checked: false },
                { time: '8 PM', emoji: '🤎', text: '일6', checked: false },
                { time: '9 PM', emoji: '🖤', text: '일7', checked: false },
                { time: '10 PM', emoji: '🩶', text: '이동,준비', checked: false },
                { time: '11 PM', emoji: '🤍', text: '개발8', checked: false }
            ];
            localStorage.setItem('routines', JSON.stringify(routines));
            loadRoutines();
        }
        const bucketlist = JSON.parse(localStorage.getItem('bucketlist') || '{}');
        if (!bucketlist[dateKey()]) {
            bucketlist[dateKey()] = {
                title_bucket1: 'Launch an iOS app',
                deadline_bucket1: 'September 2025',
                description_bucket1: 'Launch an iOS app on the App Store for free',
                title_bucket2: 'Run a Tech Corporation',
                deadline_bucket2: 'December 2025',
                description_bucket2: 'Plan, hire talent, delegate, iterate development projects quickly',
                title_bucket3: 'Title',
                deadline_bucket3: 'Deadline',
                description_bucket3: 'Description'
            };
            localStorage.setItem('bucketlist', JSON.stringify(bucketlist));
            loadBucketList();
        }
    </script>
</body>
</html>



