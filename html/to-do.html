<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyRoutine</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 0; background-color: #f5f5f5; }
        .header { background-color: #ff9500; color: white; padding: 10px; text-align: center; }
        .date { text-align: center; padding: 10px; }
        .calendar { display: flex; justify-content: center; gap: 10px; }
        .day { background-color: #e0e0e0; border-radius: 50%; width: 40px; height: 40px; line-height: 20px; text-align: center; cursor: pointer; }
        .day.active { background-color: #4cd964; color: white; }
        .pinned { background-color: #d9f7d9; padding: 10px; margin: 10px; border-radius: 8px; display: flex; align-items: center; }
        .tabs { display: flex; justify-content: space-around; padding: 10px; }
        .tab { background-color: #e0e0e0; padding: 10px; border-radius: 8px; cursor: pointer; }
        .tab.active { background-color: #4cd964; color: white; }
        .routines, .todos { margin: 10px; }
        .routine { padding: 10px; margin-bottom: 10px; border-radius: 8px; display: flex; align-items: center; gap: 10px; }
        .routine button { background: #e83e8c; color: white; border: none; padding: 5px; cursor: pointer; margin-left: 5px; }
        .routine button.delete { background: red; }
        .routine button:hover { opacity: 0.8; }
        .add-form { padding: 10px; display: flex; flex-direction: column; gap: 10px; }
        .add-form input { padding: 10px; }
        .add-form button { background-color: #4cd964; color: white; border: none; padding: 10px; cursor: pointer; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background-color: white; display: flex; justify-content: space-around; padding: 10px; border-top: 1px solid #e0e0e0; }
        /* Gradient colors for routines */
        .routine:nth-child(1) { background-color: #fff9c4; }
        .routine:nth-child(2) { background-color: #ffe0b2; }
        .routine:nth-child(3) { background-color: #fff59d; }
        .routine:nth-child(4) { background-color: #dcedc8; }
        .routine:nth-child(5) { background-color: #b3e5fc; }
        .routine:nth-child(6) { background-color: #9fa8da; }
        .routine:nth-child(7) { background-color: #ce93d8; }
        .routine:nth-child(8) { background-color: #f48fb1; }
        .routine:nth-child(9) { background-color: #bcaaa4; }
        .routine:nth-child(10) { background-color: #e57373; }
        .routine:nth-child(11) { background-color: #eeeeee; }
        .routine:nth-child(12) { background-color: #f5f5f5; }
        .routine:nth-child(13) { background-color: #e1bee7; }
        .routine:nth-child(14) { background-color: #fffde7; }
        .routine:nth-child(15) { background-color: #f8bbd0; }
        /* To-dos table styles from provided HTML */
        table { width: 100%; border-collapse: collapse; }
        th, td { border-bottom: 1px solid #ddd; padding: 10px; text-align: left; }
        .completed { text-decoration: line-through; }
        button { padding: 8px 15px; background-color: #e83e8c; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #c2255c; }
        .edit-button { margin-right: 5px; }
        .todos-add-form { display: flex; flex-wrap: wrap; gap: 10px; padding: 10px; }
        .todos-add-form input { flex: 1; min-width: 100px; padding: 8px; border-radius: 5px; border: 1px solid #ccc; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="header">MyRoutine</div>
    <div class="date" id="currentDate">Jul 2025 ‚ñº</div>
    <div class="calendar" id="calendar"></div>
    <div class="pinned">
        üìç Xtal Founder/CEO/CTO 
    </div>
    <div class="tabs">
        <div class="tab active" onclick="switchTab('routines')">Routines</div>
        <div class="tab" onclick="switchTab('todos')">To-dos</div>
    </div>
    <div id="routinesSection">
        <div class="routines" id="routinesList"></div>
        <div class="add-form">
            <input id="newTime" placeholder="Time (e.g., 19Ïãú)">
            <input id="newEmoji" placeholder="Emoji (e.g., ‚ù§Ô∏è)">
            <input id="newText" placeholder="Text">
            <button onclick="addRoutine()">Add Routine</button>
        </div>
    </div>
    <div id="todosSection" class="hidden">
        <div class="todos">
            <table id="taskList">
                <thead>
                    <tr>
                        <th>Ï§ëÏöîÍ∏¥Í∏â - Ïö∞ÏÑ†ÏàúÏúÑ - Ìï¥ÏïºÌï†Ïùº - ÏòàÏÉÅÏÜåÏöîÏãúÍ∞Ñ - ÏãúÏûëÏãúÍ∞Ñ - ÎßàÍ∞êÍ∏∞Ìïú</th>
                        <th>ÏàòÏ†ï„ÄÄ„ÄÄÏÇ≠Ï†ú„ÄÄ„ÄÄÏúÑ„ÄÄ„ÄÄÏïÑÎûò</th>
                    </tr>
                </thead>
                <tbody id="todosBody"></tbody>
            </table>
        </div>
        <div class="todos-add-form">
            <input id="newImportance" placeholder="Ï§ëÏöîÍ∏¥Í∏â">
            <input id="newPriority" placeholder="Ïö∞ÏÑ†ÏàúÏúÑ">
            <input id="newTask" placeholder="Ìï¥ÏïºÌï†Ïùº">
            <input id="newEstimatedTime" placeholder="ÏòàÏÉÅÏÜåÏöîÏãúÍ∞Ñ">
            <input id="newStartTime" placeholder="ÏãúÏûëÏãúÍ∞Ñ">
            <input id="newDeadline" placeholder="ÎßàÍ∞êÍ∏∞Ìïú">
            <button onclick="addTodo()">Îì±Î°ù</button>
        </div>
    </div>
    <div class="bottom-nav">
        <button>Home</button>
        <button>Statistics</button>
        <button>Discover</button>
        <button>Social</button>
        <button>MY</button>
    </div>

    <script>
        let currentDate = new Date(2025, 6, 23); // July 23, 2025
        const dateKey = () => currentDate.toISOString().split('T')[0];

        function updateDateDisplay() {
            const month = currentDate.toLocaleString('default', { month: 'short' });
            document.getElementById('currentDate').textContent = `${month} ${currentDate.getFullYear()} ‚ñº`;
        }

        function renderCalendar() {
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            const start = new Date(currentDate);
            start.setDate(start.getDate() - start.getDay());
            for (let i = 0; i < 7; i++) {
                const day = new Date(start);
                day.setDate(day.getDate() + i);
                const div = document.createElement('div');
                div.className = 'day' + (day.toDateString() === currentDate.toDateString() ? ' active' : '');
                div.innerHTML = `${day.toLocaleString('default', { weekday: 'short' })}<br>${day.getDate()}`;
                div.onclick = () => {
                    currentDate = day;
                    updateDateDisplay();
                    loadItems();
                };
                calendar.appendChild(div);
            }
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab[onclick="switchTab('${tab}')"]`).classList.add('active');
            document.getElementById('routinesSection').classList.toggle('hidden', tab !== 'routines');
            document.getElementById('todosSection').classList.toggle('hidden', tab !== 'todos');
        }

        function loadItems() {
            loadRoutines();
            loadTodos();
        }

        function loadRoutines() {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            const list = document.getElementById('routinesList');
            list.innerHTML = '';
            currentRoutines.forEach((routine, index) => {
                const div = document.createElement('div');
                div.className = 'routine';
                div.innerHTML = `
                    <input type="checkbox" ${routine.checked ? 'checked' : ''} onchange="toggleRoutineCheck(${index})">
                    <span class="routine-time">${routine.time}</span> <span class="routine-emoji">${routine.emoji}</span> <span class="routine-text">${routine.text}</span>
                    <button onclick="editRoutine(${index})">Edit</button>
                    <button class="delete" onclick="deleteRoutine(${index})">Delete</button>
                    <button onclick="moveRoutine(${index}, 'up')">Up</button>
                    <button onclick="moveRoutine(${index}, 'down')">Down</button>
                `;
                list.appendChild(div);
            });
        }

        function addRoutine() {
            const time = document.getElementById('newTime').value;
            const emoji = document.getElementById('newEmoji').value;
            const text = document.getElementById('newText').value;
            if (!time || !text) return;
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            currentRoutines.push({ time, emoji, text, checked: false });
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            document.getElementById('newTime').value = '';
            document.getElementById('newEmoji').value = '';
            document.getElementById('newText').value = '';
            loadRoutines();
        }

        function toggleRoutineCheck(index) {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            currentRoutines[index].checked = !currentRoutines[index].checked;
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            loadRoutines();
        }

        function editRoutine(index) {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            const routine = currentRoutines[index];
            const newTime = prompt("Time ÏàòÏ†ï:", routine.time || '');
            if (newTime !== null) routine.time = newTime;
            const newEmoji = prompt("Emoji ÏàòÏ†ï:", routine.emoji || '');
            if (newEmoji !== null) routine.emoji = newEmoji;
            const newText = prompt("Text ÏàòÏ†ï:", routine.text || '');
            if (newText !== null) routine.text = newText;
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            loadRoutines();
        }

        function deleteRoutine(index) {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            currentRoutines.splice(index, 1);
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            loadRoutines();
        }

        function moveRoutine(index, direction) {
            const routines = JSON.parse(localStorage.getItem('routines') || '{}');
            const currentRoutines = routines[dateKey()] || [];
            if (direction === 'up' && index > 0) {
                [currentRoutines[index - 1], currentRoutines[index]] = [currentRoutines[index], currentRoutines[index - 1]];
            } else if (direction === 'down' && index < currentRoutines.length - 1) {
                [currentRoutines[index], currentRoutines[index + 1]] = [currentRoutines[index + 1], currentRoutines[index]];
            }
            routines[dateKey()] = currentRoutines;
            localStorage.setItem('routines', JSON.stringify(routines));
            loadRoutines();
        }

        function loadTodos() {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            const tbody = document.getElementById('todosBody');
            tbody.innerHTML = '';
            currentTodos.forEach((todo, index) => {
                const tr = document.createElement('tr');
                const tdTask = document.createElement('td');
                const checkBox = document.createElement('input');
                checkBox.type = 'checkbox';
                checkBox.checked = todo.checked;
                checkBox.onchange = () => toggleTodoCheck(index);
                tdTask.appendChild(checkBox);
                const label = document.createElement('span');
                label.innerHTML = `<span class="todo-importance">${todo.importance || ''}</span> - <span class="todo-priority">${todo.priority || ''}</span> - <span class="todo-task">${todo.task || ''}</span> - <span class="todo-estimatedTime">${todo.estimatedTime || ''}</span> - <span class="todo-startTime">${todo.startTime || ''}</span> - <span class="todo-deadline">${todo.deadline || ''}</span>`;
                if (todo.checked) label.classList.add('completed');
                tdTask.appendChild(label);
                const tdAction = document.createElement('td');
                const editButton = document.createElement('button');
                editButton.textContent = 'ÏàòÏ†ï';
                editButton.classList.add('edit-button');
                editButton.addEventListener('click', () => editTodo(index));
                tdAction.appendChild(editButton);
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'ÏÇ≠Ï†ú';
                deleteButton.addEventListener('click', () => deleteTodo(index));
                tdAction.appendChild(deleteButton);
                const upButton = document.createElement('button');
                upButton.textContent = 'ÏúÑ';
                upButton.addEventListener('click', () => moveTodo(index, 'up'));
                tdAction.appendChild(upButton);
                const downButton = document.createElement('button');
                downButton.textContent = 'ÏïÑÎûò';
                downButton.addEventListener('click', () => moveTodo(index, 'down'));
                tdAction.appendChild(downButton);
                tr.appendChild(tdTask);
                tr.appendChild(tdAction);
                tbody.appendChild(tr);
            });
        }

        function addTodo() {
            const importance = document.getElementById('newImportance').value;
            const priority = document.getElementById('newPriority').value;
            const task = document.getElementById('newTask').value;
            const estimatedTime = document.getElementById('newEstimatedTime').value;
            const startTime = document.getElementById('newStartTime').value;
            const deadline = document.getElementById('newDeadline').value;
            if (!task) {
                alert("Ìï¥ÏïºÌï†ÏùºÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî!");
                return;
            }
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            currentTodos.push({ importance, priority, task, estimatedTime, startTime, deadline, checked: false });
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            document.getElementById('newImportance').value = '';
            document.getElementById('newPriority').value = '';
            document.getElementById('newTask').value = '';
            document.getElementById('newEstimatedTime').value = '';
            document.getElementById('newStartTime').value = '';
            document.getElementById('newDeadline').value = '';
            loadTodos();
        }

        function toggleTodoCheck(index) {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            currentTodos[index].checked = !currentTodos[index].checked;
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            loadTodos();
        }

        function deleteTodo(index) {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            currentTodos.splice(index, 1);
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            loadTodos();
        }

        function editTodo(index) {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            const todo = currentTodos[index];
            const newImportance = prompt("Ï§ëÏöîÍ∏¥Í∏â ÏàòÏ†ï:", todo.importance || '');
            if (newImportance !== null) todo.importance = newImportance;
            const newPriority = prompt("Ïö∞ÏÑ†ÏàúÏúÑ ÏàòÏ†ï:", todo.priority || '');
            if (newPriority !== null) todo.priority = newPriority;
            const newTask = prompt("Ìï¥ÏïºÌï†Ïùº ÏàòÏ†ï:", todo.task || '');
            if (newTask !== null) todo.task = newTask;
            const newEstimatedTime = prompt("ÏòàÏÉÅÏÜåÏöîÏãúÍ∞Ñ ÏàòÏ†ï:", todo.estimatedTime || '');
            if (newEstimatedTime !== null) todo.estimatedTime = newEstimatedTime;
            const newStartTime = prompt("ÏãúÏûëÏãúÍ∞Ñ ÏàòÏ†ï:", todo.startTime || '');
            if (newStartTime !== null) todo.startTime = newStartTime;
            const newDeadline = prompt("ÎßàÍ∞êÍ∏∞Ìïú ÏàòÏ†ï:", todo.deadline || '');
            if (newDeadline !== null) todo.deadline = newDeadline;
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            loadTodos();
        }

        function moveTodo(index, direction) {
            const todos = JSON.parse(localStorage.getItem('todos') || '{}');
            const currentTodos = todos[dateKey()] || [];
            if (direction === 'up' && index > 0) {
                [currentTodos[index - 1], currentTodos[index]] = [currentTodos[index], currentTodos[index - 1]];
            } else if (direction === 'down' && index < currentTodos.length - 1) {
                [currentTodos[index], currentTodos[index + 1]] = [currentTodos[index + 1], currentTodos[index]];
            }
            todos[dateKey()] = currentTodos;
            localStorage.setItem('todos', JSON.stringify(todos));
            loadTodos();
        }

        // Initial setup
        updateDateDisplay();
        renderCalendar();
        loadItems();

        // Initial routines if empty
        const routines = JSON.parse(localStorage.getItem('routines') || '{}');
        if (!routines[dateKey()]) {
            routines[dateKey()] = [
                { time: '15Ïãú', emoji: '‚ù§Ô∏è', text: 'test', checked: false },
                { time: '16Ïãú', emoji: 'üß°', text: 'test', checked: false },
                { time: '17Ïãú', emoji: 'üíõ', text: 'test', checked: false },
                { time: '18Ïãú', emoji: 'üíö', text: 'test', checked: false },
                { time: '19Ïãú', emoji: 'üíô', text: 'test', checked: false },
                { time: '20Ïãú', emoji: 'üíô', text: 'test', checked: false },
                { time: '21Ïãú', emoji: 'üíú', text: 'test', checked: false },
                { time: '22Ïãú', emoji: 'üíú', text: 'test', checked: false },
                { time: '23Ïãú', emoji: 'ü§é', text: 'test', checked: false },
                { time: '24Ïãú', emoji: 'üñ§', text: 'test', checked: false },
                { time: '25Ïãú', emoji: 'ü§ç', text: 'test', checked: false },
                { time: '26Ïãú', emoji: 'ü§ç', text: 'test', checked: false },
                { time: '27Ïãú', emoji: 'üíú', text: 'test', checked: false },
                { time: '28Ïãú', emoji: 'üíõ', text: 'test', checked: false },
                { time: '29Ïãú', emoji: 'üíñ', text: 'test', checked: false }
            ];
            localStorage.setItem('routines', JSON.stringify(routines));
            loadRoutines();
        }
    </script>
</body>
</html>
